module debounce (
    input clk,
    input reset,
    input button_in,
    output reg button_out
);
reg [19:0] counter;
reg button_sync_0, button_sync_1;
always @(posedge clk) begin
    if (reset) begin
        counter <= 0;
        button_out <= 0;
        button_sync_0 <= 0;
        button_sync_1 <= 0;
    end else begin
        button_sync_0 <= button_in;
        button_sync_1 <= button_sync_0;
        if (button_out != button_sync_1)
            counter <= 0;
        else if (counter < 20'hFFFFF)
            counter <= counter + 1;
        else
            button_out <= button_sync_1;
    end
end
endmodule